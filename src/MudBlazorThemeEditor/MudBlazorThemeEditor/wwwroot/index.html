<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MudBlazor Theme Editor</title>
    <meta name="description" content="Create, customize, and export beautiful MudBlazor themes with real-time visual feedback." />
    <meta name="keywords" content="MudBlazor, Theme, Editor, Blazor, WebAssembly, Material Design" />
    <base href="/" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- MudBlazor CSS -->
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />

    <!-- App CSS -->
    <link href="css/app.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="favicon.png" />

    <!-- Loader Styles -->
    <style>
        /* Application Loader Styles */
        .theme-editor-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        .theme-editor-loader::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(10px, 10px); }
        }

        .loader-container {
            position: relative;
            z-index: 1;
            text-align: center;
            max-width: 400px;
            padding: 2rem;
        }

        .loader-logo {
            width: 120px;
            height: 120px;
            margin: 0 auto 2rem;
            position: relative;
            animation: logoFloat 3s ease-in-out infinite;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .logo-palette {
            width: 100%;
            height: 100%;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-wrap: wrap;
            padding: 8px;
            gap: 4px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .palette-color {
            flex: 1;
            min-width: 20px;
            height: 20px;
            border-radius: 6px;
            animation: colorPulse 2s ease-in-out infinite;
        }

        .palette-color:nth-child(1) { background: #00AA5D; animation-delay: 0s; }
        .palette-color:nth-child(2) { background: #383838; animation-delay: 0.2s; }
        .palette-color:nth-child(3) { background: #16DB65; animation-delay: 0.4s; }
        .palette-color:nth-child(4) { background: #2196F3; animation-delay: 0.6s; }
        .palette-color:nth-child(5) { background: #FF9800; animation-delay: 0.8s; }
        .palette-color:nth-child(6) { background: #EF233C; animation-delay: 1s; }
        .palette-color:nth-child(7) { background: #9C27B0; animation-delay: 1.2s; }
        .palette-color:nth-child(8) { background: #607D8B; animation-delay: 1.4s; }
        .palette-color:nth-child(9) { background: #4CAF50; animation-delay: 1.6s; }

        @keyframes colorPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.1);
                opacity: 1;
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            }
        }

        .loader-title {
            color: white;
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: -0.5px;
        }

        .loader-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            font-weight: 400;
            margin-bottom: 2rem;
            line-height: 1.5;
        }

        .loader-progress {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00AA5D, #16DB65, #2196F3, #00AA5D);
            background-size: 300% 100%;
            border-radius: 2px;
            animation: progressFlow 2s ease-in-out infinite, progressGrow 3s ease-out forwards;
            width: 0%;
        }

        @keyframes progressFlow {
            0% { background-position: 100% 0; }
            100% { background-position: 0% 0; }
        }

        @keyframes progressGrow {
            0% { width: 0%; }
            20% { width: 15%; }
            40% { width: 35%; }
            60% { width: 60%; }
            80% { width: 85%; }
            100% { width: 100%; }
        }

        .loader-status {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.875rem;
            font-weight: 500;
            min-height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .status-icon {
            width: 16px;
            height: 16px;
            border: 2px solid transparent;
            border-top: 2px solid rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .feature-badges {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .feature-badge {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
            animation: badgeFloat 4s ease-in-out infinite;
        }

        .feature-badge:nth-child(1) { animation-delay: 0s; }
        .feature-badge:nth-child(2) { animation-delay: 0.5s; }
        .feature-badge:nth-child(3) { animation-delay: 1s; }
        .feature-badge:nth-child(4) { animation-delay: 1.5s; }

        @keyframes badgeFloat {
            0%, 100% { transform: translateY(0px); opacity: 0.7; }
            50% { transform: translateY(-5px); opacity: 1; }
        }

        /* Fade out animation */
        .theme-editor-loader.loaded {
            animation: fadeOut 0.5s ease-out forwards;
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .loader-container {
                padding: 1rem;
            }

            .loader-logo {
                width: 100px;
                height: 100px;
            }

            .loader-title {
                font-size: 1.5rem;
            }

            .loader-subtitle {
                font-size: 0.875rem;
            }

            .feature-badges {
                bottom: 1rem;
                gap: 0.5rem;
            }

            .feature-badge {
                font-size: 0.7rem;
                padding: 0.4rem 0.8rem;
            }
        }
    </style>
</head>

<body>
<!-- Application Loader -->
<div id="theme-editor-loader" class="theme-editor-loader">
    <div class="loader-container">
        <div class="loader-logo">
            <div class="logo-palette">
                <div class="palette-color"></div>
                <div class="palette-color"></div>
                <div class="palette-color"></div>
                <div class="palette-color"></div>
                <div class="palette-color"></div>
                <div class="palette-color"></div>
                <div class="palette-color"></div>
                <div class="palette-color"></div>
                <div class="palette-color"></div>
            </div>
        </div>

        <h3 class="loader-title">MudBlazor Theme Editor</h3>
        <p class="loader-subtitle">Create beautiful themes with real-time visual feedback</p>

        <div class="loader-progress">
            <div class="progress-fill"></div>
        </div>

        <div class="loader-status">
            <div class="status-icon"></div>
            <span id="loading-status">Initializing application...</span>
        </div>
    </div>

    <div class="feature-badges">
        <div class="feature-badge">🎨 Real-time Preview</div>
        <div class="feature-badge">📱 Responsive Design</div>
        <div class="feature-badge">🌙 Dark/Light Modes</div>
        <div class="feature-badge">⚡ .NET 9 + Blazor</div>
    </div>
</div>

<!-- Main Application Container -->
<div id="app">
    <!-- Blazor will render here -->
</div>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>

<!-- Scripts -->
<script src="_framework/blazor.webassembly.js"></script>
<script src="_content/MudBlazor/MudBlazor.min.js"></script>

<!-- Loader Management Script -->
<script>
    (function() {
        const loader = document.getElementById('theme-editor-loader');
        const statusElement = document.getElementById('loading-status');

        const loadingMessages = [
            'Initializing application...',
            'Loading MudBlazor components...',
            'Setting up theme system...',
            'Preparing color palettes...',
            'Configuring real-time preview...',
            'Almost ready...'
        ];

        let messageIndex = 0;
        let messageInterval;

        // Cycle through loading messages
        function updateLoadingMessage() {
            if (messageIndex < loadingMessages.length - 1) {
                statusElement.textContent = loadingMessages[messageIndex];
                messageIndex++;
            } else {
                clearInterval(messageInterval);
                statusElement.textContent = 'Starting MudBlazor Theme Editor...';
            }
        }

        // Start message cycling
        messageInterval = setInterval(updateLoadingMessage, 500);

        // Hide loader when Blazor is ready
        function hideLoader() {
            clearInterval(messageInterval);
            loader.classList.add('loaded');

            setTimeout(() => {
                loader.style.display = 'none';
            }, 500);
        }

        // Listen for Blazor startup events
        window.addEventListener('load', function() {
            // Additional check for Blazor readiness
            const checkBlazorReady = setInterval(() => {
                if (window.Blazor && document.querySelector('.mud-layout, .mud-container, [data-blazor-rendered]')) {
                    clearInterval(checkBlazorReady);
                    setTimeout(hideLoader, 1000); // Small delay to show completion
                }
            }, 100);

            // Fallback timeout
            setTimeout(() => {
                clearInterval(checkBlazorReady);
                hideLoader();
            }, 5000);
        });

        // Handle loading errors
        window.addEventListener('error', function(e) {
            clearInterval(messageInterval);
            statusElement.innerHTML = '<span style="color: #ff6b6b;">⚠️ Loading error occurred. Please refresh the page.</span>';
        });

        // Keyboard shortcut to skip loader (for development)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                hideLoader();
            }
        });
    })();
</script>
</body>